# Dockerfile - builds an image with the FastAPI app.
FROM python:3.10-slim

ENV PYTHONUNBUFFERED=1
WORKDIR /app

# system deps (you may add build-essential if building heavy deps)
RUN apt-get update && \
    apt-get install -y --no-install-recommends build-essential git curl && \
    rm -rf /var/lib/apt/lists/*

COPY requirements.txt /app/requirements.txt
RUN pip install --upgrade pip
RUN pip install -r /app/requirements.txt

# copy app
COPY main.py /app/main.py

# optionally copy a local model directory into the image if present in repo (e.g. arabert_model/)
# If you push model directory to GitHub, Docker build will include it:
COPY arabert_model /app/arabert_model

EXPOSE 8080
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8080", "--workers", "1"]
